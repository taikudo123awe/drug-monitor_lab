<!-- add header -->
<%- include('includes/_header') %>
<!-- end header -->

<!-- Main section -->
<main id="main">

    <h2>Calculate Drugs to Purchase</h2>
    <p>For how many days do you want to purchase drugs?</p>

    <!-- Form nhập số ngày -->
    <form action="/purchase" method="get">
        <input type="number" name="days" value="<%= days %>" min="1" required>
        <button type="submit">Enter</button>
    </form>

    <!-- Bảng kết quả -->
    <table id="purchase_table">    
        <thead>
            <tr>
                <th>#</th>
                <th>Drug Name</th>
                <th>Total Pills Needed</th>
                <th>Cards to Buy</th>
                <th>Packs to Buy</th>
            </tr>
        </thead>
        <tbody>
            <% drugs.forEach((drug, i) => { 
                let pills = days * drug.perDay; 
                let cardsToBuy = Math.ceil(pills / drug.card);
                let packsToBuy = Math.ceil(cardsToBuy / drug.pack);
            %>
            <tr>
                <td><%= i + 1 %></td>
                <td><%= drug.name %></td>
                <td><%= pills %></td>
                <td><%= cardsToBuy %> (<%= drug.card %> pills/card)</td>
                <td><%= packsToBuy %> (<%= drug.pack %> cards/pack)</td>
            </tr>
            <% }) %>
        </tbody>
    </table>
</main>
<!-- End main section -->

<!-- add footer -->
<%- include('includes/_footer') %>
<!-- end footer-->
